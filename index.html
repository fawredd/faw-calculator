<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./images/favicon-32x32.png"
    />

    <title>@fawredd - Frontend Mentor | Calculator app</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@700&display=swap"
      rel="stylesheet"
    />

    <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
    <style>
      :root {
        /* Given mode */
        /* Theme 1 */
        /* Backgrounds */
        --t1-mainBackground: hsl(222, 26%, 31%);
        --t1-toogle-keypad-bg: hsl(223, 31%, 20%);
        --t1-screen-bg: hsl(224, 36%, 15%);
        /* Keys */
        --t1-key-dark-blue-bg: hsl(225, 21%, 49%);
        --t1-keyPressed-dark-blue-bg: hsl(225, 100%, 83%);
        --t1-key-dark-blue-shadow: hsl(224, 28%, 35%);
        --t1-key-toggle-red-bg: hsl(6, 63%, 50%);
        --t1-keyPressed-toggle-red-bg: hsl(6, 100%, 74%);
        --t1-key-red-shadow: hsl(6, 70%, 34%);
        --t1-key-light-bg: hsl(30, 25%, 89%);
        --t1-key-light-shadow: hsl(28, 16%, 65%);
        /* Text */
        --t1-text-dark: hsl(221, 14%, 31%);
        --t1-text-light: hsl(0, 0%, 100%);

        /* Theme 2 */
        /* Backgrounds */
        --t2-mainBackground: hsl(0, 0%, 90%);
        --t2-toogle-keypad-bg: hsl(0, 5%, 81%);
        --t2-screen-bg: hsl(0, 0%, 93%);
        /* Keys */
        --t2-key-dark-blue-bg: hsl(185, 42%, 37%);
        --t2-keyPressed-dark-blue-bg: hsl(185, 68%, 62%);
        --t2-key-dark-blue-shadow: hsl(185, 58%, 25%);
        --t2-key-toggle-red-bg: hsl(25, 98%, 40%);
        --t2-keyPressed-toggle-red-bg: hsl(25, 100%, 70%);
        --t2-key-red-shadow: hsl(25, 99%, 27%);
        --t2-key-light-bg: hsl(45, 7%, 89%);
        --t2-key-light-shadow: hsl(35, 11%, 61%);
        /* Text */
        --t2-text-dark: hsl(60, 10%, 19%);
        --t2-text-light: hsl(0, 0%, 100%);

        /* Theme 3 */
        /* Backgrounds */
        --t3-mainBackground: hsl(268, 75%, 9%);
        --t3-toogle-keypad-bg: hsl(268, 71%, 12%);
        --t3-screen-bg: hsl(268, 71%, 12%);
        /* Keys */
        --t3-key-dark-blue-bg: hsl(281, 89%, 26%);
        --t3-keyPressed-dark-blue-bg: hsl(281, 67%, 57%);
        --t3-key-dark-blue-shadow: hsl(285, 91%, 52%);
        --t3-key-toggle-red-bg: hsl(176, 100%, 44%);
        --t3-keyPressed-toggle-red-bg: hsl(176, 100%, 84%);
        --t3-key-red-shadow: hsl(177, 92%, 70%);
        --t3-key-light-bg: hsl(268, 47%, 21%);
        --t3-key-light-shadow: hsl(290, 70%, 36%);
        /* Text */
        --t3-text-dark: hsl(198, 20%, 13%);
        --t3-text-light: hsl(0, 0%, 100%);
        --t3-text-yeloow: hsl(52, 100%, 62%);

        /* Default mode */
        margin: 0;
        padding: 0;
        font-family: "League Spartan", sans-serif;
        font-optical-sizing: auto;
        font-weight: 700;
        font-style: normal;
        font-size: 32px;
        --radius: 5px;
        /* Backgrounds */
        --mainBackground: var(--t1-mainBackground);
        --toogle-keypad-bg: var(--t1-toogle-keypad-bg);
        --screen-bg: var(--t1-screen-bg);
        /* Keys */
        --key-dark-bg: var(--t1-key-dark-blue-bg);
        --key-dark-shadow: var(--t1-key-dark-blue-shadow);
        --key-toggle-red-bg: var(--t1-key-toggle-red-bg);
        --key-red-shadow: var(--t1-key-red-shadow);
        --key-light-bg: var(--t1-key-light-bg);
        --key-light-shadow: var(--t1-key-light-shadow);
        /* Text */
        --keys-text: var(--t1-text-dark);
        --skeys-text: var(--t1-text-light);
        --display-text: var(--t1-text-light);
        --header-text: var(--t1-text-light);

      }

      body {
        display:grid;
        grid-template-rows: 1fr auto;
        background-color: var(--mainBackground);
        margin:0;
        height:100vh;

      }

      .containerClass {
        width:100%;
        height:95%;
        min-width: 270px;
        max-width: 340px;
        display: flex;
        flex-direction: column;
        gap: 15px;
        justify-self: center;
        align-self: center;
      }

      .headerClass {
        display:flex;
        flex-direction: row;
        justify-content: space-between;
        align-content: center;
      }
      .headerClass .title {
        color: var(--header-text);
        margin:0;
        font-size:0.7rem;
        align-self:self-end;
      }
      .themeClass {
        display: grid;
        grid-template-columns: repeat(2, minmax(auto, 1fr));
        grid-template-rows: repeat(2, minmax(auto, 1fr));
        font-size: 8px;
        max-width: 100px;
        min-width: 90px;
        justify-content: center;
        color: var(--header-text);
      }
      .themeClass .switchTitle {
        text-transform: uppercase;
        justify-self: left;
        align-self: center;
      }
      .themeClass .themeNumberTitle {
        display: flex;
        justify-content: space-between;
        align-self: center;
        padding: 0 6px;
      }
      .toggleSwitchClass {
        display: flex;
        justify-content: space-between;
        background-color: var(--toogle-keypad-bg);
        border-radius: 8px;
        vertical-align: middle;
        padding: 3px;
        font-size: 0;
      }
      .toggleSwitchClass label {
        display: inline-block;
        position: relative;
        cursor: pointer;
      }
      .toggleSwitchClass .toggle-button {
        display: block;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        border: none;
        background-color: transparent;
        transition: all 0.3s ease;
      }
      .toggleSwitchClass input[type="radio"]:checked + .toggle-button {
        background-color: var(--key-toggle-red-bg);
      }
      .toggleSwitchClass input {
        position:absolute;
        visibility: hidden;
        /* display: none; */
      }

      .displayClass {
        height: 20%;
        background-color: var(--screen-bg);
        display: flex;
        justify-content: end;
        padding: 6px 10px;
        border-radius: var(--radius);
      }
      .displayClass input {
        background-color: transparent;
        border: none;
        width: 100%;
        color: var(--display-text);
        text-align: right;
        font-size: xx-large;
        font-weight: bold;
      }

      .touchpadClass {
        flex-grow: 1;
        display: grid;
        gap: 0.5rem;
        height:100%;
        grid-template-columns: repeat(4, minmax(10px, 1fr));
        grid-template-rows: repeat(5,  0.8fr);
        background-color: var(--toogle-keypad-bg);
        padding: 0.8rem;
        border-radius: var(--radius);
      }
      .touchpadClass button:nth-child(n + 17) {
        grid-column: span 2;
      }
      .touchpadClass button {
        border-radius: var(--radius);
        border-color: transparent;
        font-weight: bold;

      }
      .touchpadClass button.keys {
        font-size: 0.6rem;
        color: var(--keys-text);
        box-shadow: 0px 2px var(--key-light-shadow);
        background-color: var(--key-light-bg);
      }
      .touchpadClass button.keys:active {

      }

      .touchpadClass button.keyDelRes {
        font-size: 0.4rem;
        color: var(--skeys-text);
        background-color: var(--key-dark-bg);
        box-shadow: 0px 2px var(--key-dark-shadow);
      }
      .touchpadClass button.keyDelRes:active {
        background-color: var(--key-dark-shadow);
      }
      .touchpadClass button.keyEqual {
        font-size: 0.3rem;
        color: var(--skeys-text);
        background-color: var(--key-toggle-red-bg);
        box-shadow: 0px 2px var(--key-red-shadow);
      }

      /* Switched mode */
      .t1Active {
        /* Backgrounds */
        --mainBackground: var(--t1-mainBackground);
        --toogle-keypad-bg: var(--t1-toogle-keypad-bg);
        --screen-bg: var(--t1-screen-bg);
        /* Keys */
        --key-dark-bg: var(--t1-key-dark-blue-bg);
        --key-dark-shadow: var(--t1-key-dark-blue-shadow);
        --key-toggle-red-bg: var(--t1-key-toggle-red-bg);
        --key-red-shadow: var(--t1-key-red-shadow);
        --key-light-bg: var(--t1-key-light-bg);
        --key-light-shadow: var(--t1-key-light-shadow);
        /* Text */
        --keys-text: var(--t1-text-dark);
        --skeys-text: var(--t1-text-light);
        --display-text: var(--t1-text-light);
        --header-text: var(--t1-text-light);
      }
      .t2Active {
        /* Backgrounds */
        --mainBackground: var(--t2-mainBackground);
        --toogle-keypad-bg: var(--t2-toogle-keypad-bg);
        --screen-bg: var(--t2-screen-bg);
        /* Keys */
        --key-dark-bg: var(--t2-key-dark-blue-bg);
        --key-dark-shadow: var(--t2-key-dark-blue-shadow);
        --key-toggle-red-bg: var(--t2-key-toggle-red-bg);
        --key-red-shadow: var(--t2-key-red-shadow);
        --key-light-bg: var(--t2-key-light-bg);
        --key-light-shadow: var(--t2-key-light-shadow);
        /* Text */
        --keys-text: var(--t2-text-dark);
        --skeys-text: var(--t2-text-light);
        --display-text: var(--t2-text-dark);
        --header-text: var(--t2-text-dark);
      }
      .t3Active{
        /* Backgrounds */
        --mainBackground: var(--t3-mainBackground);
        --toogle-keypad-bg: var(--t3-toogle-keypad-bg);
        --screen-bg: var(--t3-screen-bg);
        /* Keys */
        --key-dark-bg: var(--t3-key-dark-blue-bg);
        --key-dark-shadow: var(--t3-key-dark-blue-shadow);
        --key-toggle-red-bg: var(--t3-key-toggle-red-bg);
        --key-red-shadow: var(--t3-key-red-shadow);
        --key-light-bg: var(--t3-key-light-bg);
        --key-light-shadow: var(--t3-key-light-shadow);
        /* Text */
        --keys-text: var(--t3-text-yeloow);
        --skeys-text: var(--t3-text-light);
        --display-text: var(--t3-text-yeloow);
        --header-text: var(--t3-text-yeloow);
      }

      .attribution {
        font-size: 11px;
        text-align: center;
        margin-bottom: 1rem;
      }
      .attribution a {
        color: var(--keys-text);
      }
    </style>
  </head>
  <body>
    <main class="containerClass">
      <section class="headerClass">
        <div class="title">calc</div>
        <div class="themeClass">
          <span>&nbsp;</span>
          <div class="themeNumberTitle">
            <span>1</span>
            <span>2</span>
            <span>3</span>
          </div>
          <span class="switchTitle">theme</span>

          <div class="toggleSwitchClass">
            <label for="tsc1">
              <input id="tsc1" type="radio" name="state-d" checked />
              <span class="toggle-button"></span>
            </label>
            <label for="tsc2">
              <input id="tsc2" type="radio" name="state-d" />
              <span class="toggle-button"></span>
            </label>
            <label for="tsc3">
              <input id="tsc3" type="radio" name="state-d" />
              <span class="toggle-button"></span>
            </label>
          </div>
        </div>
      </section>

      <section class="displayClass">
        <input type="text" id="displayId" value="0" disabled />
      </section>

      <section class="touchpadClass">
        <button id="key" class="keys">7</button>
        <button id="key" class="keys">8</button>
        <button id="key" class="keys">9</button>
        <button id="key" class="keyDelRes">DEL</button>
        <button id="key" class="keys">4</button>
        <button id="key" class="keys">5</button>
        <button id="key" class="keys">6</button>
        <button id="key" class="keys">+</button>
        <button id="key" class="keys">1</button>
        <button id="key" class="keys">2</button>
        <button id="key" class="keys">3</button>
        <button id="key" class="keys">-</button>
        <button id="key" class="keys">.</button>
        <button id="key" class="keys">0</button>
        <button id="key" class="keys">/</button>
        <button id="key" class="keys">x</button>

        <button id="key" class="keyDelRes">RESET</button>
        <button id="key" class="keyEqual">=</button>
      </section>
    </main>

    <div class="attribution">
      Challenge by
      <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">
        Frontend Mentor </a
      >. Coded by <a href="https://www.github.com/fawredd"> @fawredd </a>.
    </div>
    <script>
      document.addEventListener("DOMContentLoaded", function (e) {
        // This code is used to change themes
        const theBody = document.querySelector("body");
        const themeSwitch1 = document.querySelector("#tsc1");
        const themeSwitch2 = document.querySelector("#tsc2");
        const themeSwitch3 = document.querySelector("#tsc3");
        themeSwitch1.addEventListener("change", function (e) {
          if (e.currentTarget.checked === true) {
            theBody.className = "";
            theBody.classList.add("t1Active");
          }
        });
        themeSwitch2.addEventListener("change", function (e) {
          if (e.currentTarget.checked === true) {
            theBody.className = "";
            theBody.classList.add("t2Active");
          }
        });
        themeSwitch3.addEventListener("change", function (e) {
          if (e.currentTarget.checked === true) {
            theBody.className = "";
            theBody.classList.add("t3Active");
          }
        });
        // This code is all about the calc itself
        const display = document.querySelector("#displayId");
        const keys = document.querySelectorAll("#key");
        let oldKey = "0";
        keys.forEach((element) => {
          element.addEventListener("click", function (e) {
            e.preventDefault();
            let keyValue = e.target.textContent;
            // Playing game security for eval() prevention.
            const regex = /[\+\-\*\.\\\d{1,}\.]+/g; // Matches one or more numbers or signs
            if (
              display.value.length != display.value.match(regex).join("").length
            )
              display.value = "0";

            if (isNaN(keyValue)) {
              switch (keyValue) {
                case "=":
                  display.value = eval(display.value);
                  keyValue = "";
                  break;
                case "DEL":
                  display.value = display.value.slice(0, -1);
                  display.value.length > 0 ? (keyValue = "") : (keyValue = "0");
                  break;
                case "RESET":
                  display.value = "0";
                  keyValue = "0";
                  break;
                default:
                  if (oldKey == keyValue) {
                    keyValue = "";
                  }
                  if (display.value == "0" && keyValue == "/") {
                    keyValue = "0";
                  }

                  break;
              }
            }
            let logData = {
              display: display.value,
              keyValue: keyValue,
              oldKey: oldKey,
            };
            console.log(`CERO /n ${JSON.stringify(logData)}`);
            if (display.value == "0") {
              display.value = keyValue;
            } else {
              display.value += keyValue;
            }
            display.value = display.value.replace("x", "*");
            oldKey = keyValue;
          });
        });
      });
    </script>
  </body>
</html>
